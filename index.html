<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beyond Probable</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- ===== NAV PLACEHOLDER ===== -->
  <div id="nav-placeholder"></div>

  <!-- ===== PAGE HEADER ===== -->
  <header class="site-hero">
    <h1 class="site-title">Beyond Probable</h1>
    <p class="site-tagline">Ramblings on computers and various other topics.</p>

    <!-- Background doodles -->
    <svg class="hero-doodles" xmlns="http://www.w3.org/2000/svg" id="hero-doodles-svg">
      <style>
        [stroke="#888888"] { stroke: var(--doodle-color); }
        [fill="#888888"] { fill: var(--doodle-color); }

        @keyframes doodle-blink {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.4; }
        }

        .doodle-group {
          animation: doodle-blink 4s ease-in-out infinite;
        }
      </style>
    </svg>
    <script>
      (function() {
        const svg = document.getElementById('hero-doodles-svg');
        const width = window.innerWidth;
        const height = window.innerHeight;

        // Doodle templates (centered at 0,0)
        const doodleTemplates = [
          // Bar chart
          { width: 40, height: 50, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><rect x="-20" y="-15" width="7" height="18"/><rect x="-8" y="-25" width="7" height="38"/><rect x="4" y="-20" width="7" height="28"/><line x1="-24" y1="10" x2="15" y2="10"/></g>` },

          // Scatter plot
          { width: 60, height: 60, svg: `<g opacity="0.18" fill="#888888"><circle cx="-20" cy="-10" r="1.2"/><circle cx="-2" cy="10" r="1.2"/><circle cx="15" cy="-20" r="1.2"/><circle cx="32" cy="20" r="1.2"/><circle cx="-12" cy="30" r="1.2"/><circle cx="23" cy="-2" r="1.2"/></g>` },

          // Line graph
          { width: 100, height: 70, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><polyline points="-40,-15 -20,-40 0,-28 20,-52 40,-25"/><line x1="-50" y1="5" x2="50" y2="5"/></g>` },

          // Neural network
          { width: 50, height: 60, svg: `<g opacity="0.18"><circle cx="-15" cy="-12" r="1.2" stroke="#888888" stroke-width="1.2" fill="none"/><circle cx="-15" cy="13" r="1.2" stroke="#888888" stroke-width="1.2" fill="none"/><circle cx="15" cy="0" r="1.2" stroke="#888888" stroke-width="1.2" fill="none"/><line x1="-13.8" y1="-12" x2="13.8" y2="0" stroke="#888888" stroke-width="0.6" opacity="0.3"/><line x1="-13.8" y1="13" x2="13.8" y2="0" stroke="#888888" stroke-width="0.6" opacity="0.3"/></g>` },

          // Eye
          { width: 30, height: 30, svg: `<g opacity="0.18"><ellipse cx="0" cy="0" rx="8" ry="13" stroke="#888888" stroke-width="1.2" fill="none"/><circle cx="0" cy="0" r="4" stroke="#888888" stroke-width="1.2" fill="none"/><circle cx="0" cy="0" r="2" fill="#888888"/></g>` },

          // Grid
          { width: 30, height: 60, svg: `<g opacity="0.08" stroke="#888888" stroke-width="0.7"><line x1="-12" y1="-26" x2="-12" y2="27"/><line x1="12" y1="-26" x2="12" y2="27"/><line x1="-12" y1="-26" x2="12" y2="-26"/><line x1="-12" y1="0" x2="12" y2="0"/><line x1="-12" y1="26" x2="12" y2="26"/></g>` },

          // Bell curve
          { width: 120, height: 50, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><path d="M-60,0 Q-45,0 -36,-6 Q-26,-17 -17,-41 Q-8,-65 0,-41 Q11,-17 20,-6 Q30,0 45,0"/><line x1="-68" y1="12" x2="53" y2="12"/></g>` },

          // Matrix
          { width: 45, height: 45, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><path d="M-16,0 L-22,0 L-22,35 L-16,35"/><path d="M14,0 L20,0 L20,35 L14,35"/><circle cx="-6" cy="10" r="1" fill="#888888"/><circle cx="6" cy="10" r="1" fill="#888888"/><circle cx="-6" cy="25" r="1" fill="#888888"/><circle cx="6" cy="25" r="1" fill="#888888"/></g>` },

          // Sigma
          { width: 25, height: 30, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><polyline points="10,-13 -10,-13 0,0 -10,13 10,13"/></g>` },

          // Pie chart
          { width: 25, height: 25, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><circle cx="0" cy="0" r="9"/><line x1="0" y1="0" x2="0" y2="-9"/><line x1="0" y1="0" x2="9" y2="8"/></g>` },

          // Binary
          { width: 20, height: 25, svg: `<g opacity="0.14" fill="#888888" font-family="monospace" font-size="5"><text x="-10" y="-5">01</text><text x="-10" y="8">10</text></g>` },

          // Bounding box
          { width: 30, height: 25, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><rect x="-10" y="-8" width="21" height="17" stroke-dasharray="3,2"/><line x1="-2" y1="-3" x2="10" y2="-3"/></g>` },

          // Decision tree
          { width: 35, height: 50, svg: `<g opacity="0.18" stroke="#888888" stroke-width="0.8"><circle cx="0" cy="-12" r="1.8" fill="none" stroke-width="1.2"/><circle cx="-15" cy="13" r="1.8" fill="none" stroke-width="1.2"/><circle cx="15" cy="13" r="1.8" fill="none" stroke-width="1.2"/><line x1="-1.2" y1="-10.2" x2="-13.4" y2="11.2"/><line x1="1.2" y1="-10.2" x2="13.4" y2="11.2"/></g>` },

          // Infinity
          { width: 70, height: 30, svg: `<g opacity="0.18" stroke="#888888" stroke-width="1.2" fill="none"><path d="M-32,0 C-24,-10 -8,-10 0,0 C8,10 23,10 32,0 C23,-10 8,-10 0,0 C-8,10 -24,10 -32,0"/></g>` }
        ];

        // Generate random positions
        const numDoodles = 40; // Total doodles to place
        const minDistance = 150; // Minimum distance between doodles
        const positions = [];

        for (let i = 0; i < numDoodles; i++) {
          const template = doodleTemplates[Math.floor(Math.random() * doodleTemplates.length)];
          let attempts = 0;
          let x, y, valid;

          do {
            x = Math.random() * width;
            y = Math.random() * height;
            valid = true;

            // Check distance from other doodles
            for (const pos of positions) {
              const dx = x - pos.x;
              const dy = y - pos.y;
              if (Math.sqrt(dx*dx + dy*dy) < minDistance) {
                valid = false;
                break;
              }
            }
            attempts++;
          } while (!valid && attempts < 50);

          if (valid) {
            positions.push({ x, y, template });
          }
        }

        // Render doodles
        positions.forEach(pos => {
          const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
          g.setAttribute('class', 'doodle-group');
          g.setAttribute('transform', `translate(${pos.x}, ${pos.y})`);
          // Random animation delay between 0 and 4 seconds
          g.style.animationDelay = `${Math.random() * 4}s`;
          g.innerHTML = pos.template.svg;
          svg.appendChild(g);
        });
      })();
    </script>
  </header>

  <header class="page-header">
    <h1>Blog<sup class="post-count" id="postCount"></sup></h1>
  </header>

  <!-- ===== MAIN LAYOUT ===== -->
  <main class="home-layout">

    <!-- SIDEBAR FILTERS -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title" onclick="toggleSection(this)">
          <span class="chevron">â–¼</span> Topic
        </div>
        <ul class="filter-list" id="topicFilters">
          <!-- populated by JS -->
        </ul>
      </div>
    </aside>

    <!-- BLOG LIST -->
    <section class="blog-list-container">
      <div class="blog-list-header">
        <span>/ Date</span>
        <span>/ Name</span>
        <span></span>
      </div>
      <ul class="blog-list" id="blogList">
        <!-- populated by JS -->
      </ul>
    </section>

  </main>

  <!-- ===== FOOTER PLACEHOLDER ===== -->
  <div id="footer-placeholder"></div>

  <script src="js/posts.js"></script>
  <script src="js/main.js"></script>
  <script src="js/load-partials.js"></script>
  <script src="js/keyboard-nav.js"></script>
</body>
</html>
